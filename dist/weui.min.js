"use strict";!function(e){e.weui={version:"0.1.0"}}($),function(e){var i=null;e.weui.dialog=function(t){t=e.extend({title:"标题",content:"内容",className:"",buttons:[{label:"确定",type:"primary",onClick:e.noop}]},t);var n=t.buttons.map(function(e){return'<a href="javascript:;" class="weui_btn_dialog '+e.type+'">'+e.label+"</a>"}).join("\n"),a='<div class="'+t.className+'">\n                <div class="weui_mask"></div>\n                <div class="weui_dialog">\n                    <div class="weui_dialog_hd">\n                        <strong class="weui_dialog_title">\n                            '+t.title+'\n                        </strong>\n                    </div>\n                    <div class="weui_dialog_bd">\n                        '+t.content+'\n                    </div>\n                    <div class="weui_dialog_ft">\n                        '+n+"\n                    </div>\n                </div>\n            </div>";i=e(a),e("body").append(i),i.on("click",".weui_btn_dialog",function(){var i=t.buttons[e(this).index()],n=i.onClick||e.noop;n.call(),e.weui.closeDialog()})},e.weui.closeDialog=function(){i&&(i.off("click",".weui_btn_dialog"),i.remove(),i=null)}}($),function(e){e.weui.alert=function(i,t,n){var a="function"==typeof t;a&&(n=t),t=e.extend({title:"警告",content:i||"警告内容",className:"",buttons:[{label:"确定",type:"primary",onClick:n}]},a?{}:t),t.className="weui_dialog_alert "+t.className,e.weui.dialog(t)}}($),function(e){var i=null,t=null;e.weui.topTips=function(){var n=arguments.length<=0||void 0===arguments[0]?"topTips":arguments[0],a=arguments[1];i&&(i.remove(),t&&clearTimeout(t),i=null),"number"==typeof a&&(a={duration:a}),a=e.extend({duration:3e3},a);var s='<div class="weui_toptips weui_warn" style="display: block;">'+n+"</div>";i=e(s),e("body").append(i),t=setTimeout(function(){i&&i.remove(),i=null},a.duration)}}($),function(e){var i=null;e.weui.actionSheet=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?[{label:"取消"}]:arguments[1],a=t.map(function(e,i){return'<div class="weui_actionsheet_cell">'+e.label+"</div>"}).join(""),s=n.map(function(e,i){return'<div class="weui_actionsheet_cell">'+e.label+"</div>"}).join(""),o='<div>\n            <div class="weui_mask_transition"></div>\n            <div class="weui_actionsheet">\n                <div class="weui_actionsheet_menu">\n                    '+a+'\n                </div>\n                <div class="weui_actionsheet_action">\n                    '+s+"\n                </div>\n            </div>\n        </div>";i=e(o),e("body").append(i),i.find(".weui_mask_transition").show().addClass("weui_fade_toggle"),i.find(".weui_actionsheet").addClass("weui_actionsheet_toggle"),i.on("click",".weui_actionsheet_menu .weui_actionsheet_cell",function(){var i=t[e(this).index()],n=i.onClick||e.noop;n.call(),e.weui.hideActionSheet()}).on("click",".weui_mask_transition",function(){e.weui.hideActionSheet()}).on("click",".weui_actionsheet_action .weui_actionsheet_cell",function(){var i=n[e(this).index()],t=i.onClick||e.noop;t.call(),e.weui.hideActionSheet()})},e.weui.hideActionSheet=function(){if(i){var e=i.find(".weui_mask_transition"),t=i.find(".weui_actionsheet");e.removeClass("weui_fade_toggle"),t.removeClass("weui_actionsheet_toggle"),t.on("transitionend",function(){i.remove(),i=null}).on("webkitTransitionEnd",function(){i.remove(),i=null})}}}($),function(e){e.weui.confirm=function(i,t,n,a){var s="function"==typeof t;s&&(a=n,n=t),t=e.extend({title:"确认",content:i||"确认内容",className:"",buttons:[{label:"取消",type:"default",onClick:a||e.noop},{label:"确定",type:"primary",onClick:n||e.noop}]},s?{}:t),t.className="weui_dialog_confirm "+t.className,e.weui.dialog(t)}}($),function(){function e(e){var i=e[0],t=e.val();if("INPUT"==i.tagName||"TEXTAREA"==i.tagName){var n=i.getAttribute("required")||i.getAttribute("pattern")||"";return e.val().length?n?new RegExp(n).test(t)?null:"notMatch":null:"empty"}return"checkbox"==i.getAttribute("type")||"radio"==i.getAttribute("type")?i.checked?null:"empty":t.length?null:"empty"}function i(e){if(e){var i=e.$dom,t=e.msg,n=i.attr(t+"Tips")||i.attr("tips")||i.attr("placeholder");n&&$.weui.topTips(n),i.parents(".weui_cell").addClass("weui_cell_warn")}}var t=$.fn.form;$.fn.form=function(){return this.each(function(t,n){var a=$(n);a.find("[required]").on("blur",function(){var t,n=$(this);n.val().length<1||(t=e(n),t&&i({$dom:n,msg:t}))}).on("focus",function(){var e=$(this);e.parents(".weui_cell").removeClass("weui_cell_warn")})})},$.fn.form.noConflict=function(){return t};var n=$.fn.validate;$.fn.validate=function(t){return this.each(function(){var n=$(this).find("[required]");"function"!=typeof t&&(t=i);for(var a=0,s=n.length;s>a;++a){var o=n.eq(a),l=e(o);if(l){t({$dom:o,msg:l});break}}t(null)})},$.fn.validate.noConflict=function(){return n}}(),function(e){var i=null;e.weui.loading=function(){var t=arguments.length<=0||void 0===arguments[0]?"loading...":arguments[0],n='<div class="weui_loading_toast">\n        <div class="weui_mask_transparent"></div>\n        <div class="weui_toast">\n            <div class="weui_loading">\n                <div class="weui_loading_leaf weui_loading_leaf_0"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_1"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_2"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_3"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_4"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_5"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_6"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_7"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_8"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_9"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_10"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_11"></div>\n            </div>\n            <p class="weui_toast_content">'+t+"</p>\n        </div>\n    </div>";i=e(n),e("body").append(i)},e.weui.hideLoading=function(){i&&i.remove(),i=null}}($),function(e){e.fn.progress=function(i){var t=this;i=e.extend({value:0},i),i.value<0&&(i.value=0),i.value>100&&(i.value=100);var n=this.find(".weui_progress_inner_bar");if(0===n.length){var a="function"==typeof i.onClick?'<a href="javascript:;" class="weui_progress_opr">\n                    <i class="weui_icon_cancel"></i>\n                </a>':"",s='<div class="weui_progress">\n                <div class="weui_progress_bar">\n                    <div class="weui_progress_inner_bar" style="width: '+i.value+'%;"></div>\n                </div>\n                '+a+"\n            </div>";return"function"==typeof i.onClick&&this.on("click",".weui_progress_opr",function(){i.onClick.call(t)}),this.html(s)}return n.width(i.value+"%")}}($),function(e){e.fn.searchBar=function(i){function t(i,t,n){if("function"==typeof n[t]){var a=e(i).val();n[t].call(i,a)}}i=e.extend({focusingClass:"weui_search_focusing",searchText:"搜索",cancelText:"取消"},i);var n='<div class="weui_search_bar">\n                    <form class="weui_search_outer">\n                        <div class="weui_search_inner">\n                            <i class="weui_icon_search"></i>\n                            <input type="search" class="weui_search_input" id="weui_search_input" placeholder="'+i.searchText+'" required/>\n                            <a href="javascript:" class="weui_icon_clear"></a>\n                        </div>\n                        <label for="weui_search_input" class="weui_search_text">\n                            <i class="weui_icon_search"></i>\n                            <span>'+i.searchText+'</span>\n                        </label>\n                    </form>\n                    <a href="javascript:" class="weui_search_cancel">'+i.cancelText+"</a>\n                </div>",a=e(n);this.append(a);var s=this.find(".weui_search_bar"),o=this.find(".weui_search_text"),l=this.find(".weui_search_input");this.on("focus","#weui_search_input",function(){o.hide(),s.addClass(i.focusingClass),t(l,"onfocus",i)}).on("blur","#weui_search_input",function(){s.removeClass(i.focusingClass),e(this).val()?o.hide():o.show(),t(l,"onblur",i)}).on("touchend",".weui_search_cancel",function(){l.val(""),t(l,"oncancel",i)}).on("touchend",".weui_icon_clear",function(e){e.preventDefault(),l.val(""),"search_input"!=document.activeElement.id&&l.trigger("focus"),t(l,"onclear",i)}).on("input",".weui_search_input",function(){t(l,"input",i)}).on("submit",".weui_search_outer",function(){return"function"==typeof i.onsubmit?(t(l,"onsubmit",i),!1):void 0})}}($),function(e){e.weui.swipeOutOpenedEl=void 0;var i=e.fn.swipeOut;e.fn.swipeOut=function(i){function t(i){var t=i.originalEvent;if(e.weui.swipeOutOpenedEl){var n=e(t.target);if(e(n[0]).is(e.weui.swipeOutOpenedEl)||n.parents(".weui_cell_swipeout").is(e.weui.swipeOutOpenedEl))return}o=!1,s=!0,l=void 0,u.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,u.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,r=Date.now()}function n(t){var n=t.originalEvent;if(s){var a="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;"touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(l)return void(s=!1);if(o||(c=e(this),f=c.find(".weui_swipeout_content"),w=c.find(".weui_swipeout_actions_left"),_=c.find(".weui_swipeout_actions_right"),v=p=C=b=O=y=null,w.length>0&&(v=w.outerWidth(),C=w.children("a"),O=w.find(".weui_swipeout_overswipe")),_.length>0&&(p=_.outerWidth(),b=_.children("a"),y=_.find(".weui_swipeout_overswipe")),g=c.hasClass("weui_swipeout_opened"),g&&(m=c.find(".weui_swipeout_actions_left.weui_swipeout_actions_opened").length>0?"left":"right"),c.removeClass("transitioning"),i.noFollow&&(c.find(".weui_swipeout_opened").removeClass(".weui_swipeout_opened"),c.removeClass(".weui_swipeout_opened"))),o=!0,t.preventDefault(),d=a-u.x,h=d,g&&("right"===m?h-=p:h+=v),h>0&&0===w.length||0>h&&0===_.length){if(!g)return s=o=!1,f.css("transform",""),C&&C.length>0&&C.css("transform",""),void(b&&b.length>0&&b.css("transform",""));h=0}x=0>h?"to-left":h>0?"to-right":x?"direction":"to-left";var r=void 0,E=void 0,T=void 0;if(i.noFollow)return g?("right"===m&&d>0&&c.swipeOutClose(),"left"===m&&0>d&&c.swipeOutClose()):(0>d&&_.length>0&&c.swipeOutOpen("right"),d>0&&w.length>0&&c.swipeOutOpen("left")),s=!1,void(o=!1);k=!1,$=!1;var M=void 0;if(_.length>0&&"to-left"===x){for(T=h/p,-p>h&&(h=-p-Math.pow(-h-p,.8),y.length>0&&($=!0)),r=0;r<b.length;r++)"undefined"==typeof b[r]._buttonOffset&&(b[r]._buttonOffset=b[r].offsetLeft),E=b[r]._buttonOffset,M=e(b[r]),y.length>0&&$buttons.hasClass("swipeout-overswipe")&&($buttons.css({left:($?-E:0)+"px"}),$?M.addClass("swipeout-overswipe-active"):M.removeClass("swipeout-overswipe-active")),M.css("transform","translate3d("+Math.max(h,-p)+"px,0,0)");f.css("transform","translate3d("+Math.max(h,-p-30)+"px,0,0)")}if(w.length>0&&"to-right"===x){for(T=h/v,h>v&&(h=v+Math.pow(h-v,.8),O.length>0&&(k=!0)),r=0;r<C.length;r++)"undefined"==typeof C[r]._buttonOffset&&(C[r]._buttonOffset=v-C[r].offsetLeft-C[r].offsetWidth),E=C[r]._buttonOffset,M=e(C[r]),O.length>0&&M.hasClass("swipeout-overswipe")&&($buttons.cass({left:(k?E:0)+"px"}),k?M.addClass("swipeout-overswipe-active"):M.removeClass("swipeout-overswipe-active")),C.length>1&&M.css("z-index",C.length-r),M.css("transform","translate3d("+Math.min(h,v)+"px,0,0)");f.css("transform","translate3d("+Math.min(h,v+30)+"px,0,0)")}}}function a(i){i.originalEvent;if(!s||!o)return s=!1,void(o=!1);s=!1,o=!1;var t=Date.now()-r,n=void 0,a=void 0,l=void 0,u=void 0,g=void 0;if(l="to-left"===x?_:w,a="to-left"===x?p:v,n=300>t&&(-10>d&&"to-left"===x||d>10&&"to-right"===x)||t>=300&&Math.abs(h)>a/2?"open":"close",300>t&&(0===Math.abs(h)&&(n="close"),Math.abs(h)===a&&(n="open")),"open"===n){e.weui.swipeOutOpenedEl=c,c.toggleClass("open"),c.addClass("weui_swipeout_opened transitioning");var m="to-left"===x?-a:a;if(f.css("transform","translate3d("+m+"px,0,0)"),l.addClass("weui_swipeout_actions_opened"),u="to-left"===x?b:C)for(g=0;g<u.length;g++)e(u[g]).css("transform","translate3d("+m+"px, 0,0)");$&&_.find(".weui_swipeout_overswipe")[0].click(),k&&w.find(".weui_swipeout_overswipe")[0].click()}else e.weui.swipeOutOpenedEl=void 0,c.toggleClass("close"),c.addClass("transitioning").removeClass("weui_swipeout_opened"),f.css("transform",""),l.removeClass("weui_swipeout_actions_opened");var O=void 0;if(C&&C.length>0&&C!=u)for(g=0;g<C.length;g++)O=C[g]._buttonOffset,"undefined"==typeof O&&(C[g]._buttonOffset=v-C[g].offsetLeft-C[g].offsetWidth),e(C[g]).css("transform","translate3d("+O+"px,0,0)");if(b&&b.length>0&&b!=u)for(g=0;g<b.length;g++)O=b[g]._buttonOffset,"undefined"==typeof O&&(b[g]._buttonOffset=p-b[g].offsetRight-b[g].offsetWidth),e(b[g]).css("transform","translate3d("+O+"px,0,0)")}i=e.extend({noFollow:!1},i);var s=void 0,o=void 0,l=void 0,u={},r=void 0,d=void 0,c=void 0,f=void 0,_=void 0,w=void 0,v=void 0,p=void 0,h=void 0,g=void 0,m=void 0,C=void 0,b=void 0,x=void 0,O=void 0,y=void 0,k=void 0,$=void 0;return e(document).on("touchstart",function(i){var t=i.originalEvent,n=e(t.target);e.weui.swipeOutOpenedEl&&(n.hasClass("weui_swipeout_action")||e.weui.swipeOutOpenedEl.swipeOutClose())}),e(".weui_cell_swipeout").on("touchstart",t),e(".weui_cell_swipeout").on("touchmove",n),e(".weui_cell_swipeout").on("touchend",a),this},e.fn.swipeOut.noConflict=function(){return i};var t=e.fn.swipeOutOpen;e.fn.swipeOutOpen=function(i){var t=e(this);if(0!==t.length&&!t.hasClass("weui_swipeout_opened")){i||(i=t.find(".weui_swipeout_actions_right").length>0?"right":"left");var n=t.find(".weui_swipeout_actions_"+i);if(0!==n.length){t.toggleClass("open").addClass("weui_swipeout_opened").removeClass("transitioning"),n.addClass("weui_swipeout_actions_opened");var a=n.children("a"),s=n.outerWidth(),o="right"===i?-s:s;if(a.length>1)for(var l=0;l<a.length;l++)"right"===i?e(a[l]).css("transform","translate3d("+-a[l].offsetLeft+"px,0,0)"):e(a[l]).css("z-index",a.length-l).css("transform","translate3d("+(s-a[l].offsetWidth-a[l].offsetLeft)+"px,0,0)");t.addClass("transitioning");for(var u=0;u<a.length;u++)e(a[u]).css("transform","translate3d("+o+"px,0,0)");t.find(".weui_swipeout_content").css("transform","translate3d("+o+"px,0,0)").on("transitionend",function(){t.toggleClass("opened")}),e.weui.swipeOutOpenedEl=t}}},e.fn.swipeOutOpen.noConflict=function(){return t};var n=e.fn.swipeOutClose;e.fn.swipeOutClose=function(){function i(){e.weui.allowSwipeout=!0,t.hasClass("weui_swipeou_openedt")||(t.removeClass("transitioning"),s.css("tranform",""),t.toggleClass("closed"))}var t=e(this);if(t.hasClass("weui_swipeout_opened")){var n=t.find(".weui_swipeout_actions_opened").hasClass("weui_swipeout_actions_right")?"right":"left",a=t.find(".weui_swipeout_actions_opened").removeClass("weui_swipeout_actions_opened"),s=a.children("a"),o=a.outerWidth();e.weui.allowSwipeout=!1,t.toggleClass("close"),t.removeClass("weui_swipeout_opened").addClass("transitioning");var l=void 0;t.find(".weui_swipeout_content").css("transform","").on("transitionend",i),l=setTimeout(i,500);for(var u=0;u<s.length;u++)"right"===n?e(s[u]).css("transform","translate3d("+-s[u].offsetLeft+"px, 0,0)"):e(s[u]).css("transform","translate3d("+(o-s[u].offsetWidth-s[u].offsetLeft)+"px, 0,0)"),e(s[u]).css({left:"0px"}).removeClass("weui_swipeout_overswipe_active");e.weui.swipeOutOpenedEl&&e.weui.swipeOutOpenedEl[0]===t[0]&&(e.weui.swipeOutOpenedEl=void 0)}},e.fn.swipeOutClose.noConflict=function(){return n};var a=e.fn.swipeOutDelete;e.fn.swipeOutDelete=function(){},e.fn.swipeOutDelete.noConflict=function(){return a}}($),function(e){var i=e.fn.tab;e.fn.tab=function(i){i=e.extend({defaultIndex:0,activeClass:"weui_bar_item_on"},i);var t=this.find(".weui_tabbar_item, .weui_navbar_item"),n=this.find(".weui_tab_bd_item");this.find(".weui_navbar").css("z-index",1),this.toggle=function(e){var a=t.eq(e);a.addClass(i.activeClass).siblings().removeClass(i.activeClass);var s=n.eq(e);s.show().siblings().hide()};var a=this;return this.on("click",".weui_tabbar_item, .weui_navbar_item",function(i){var t=e(this).index();a.toggle(t)}),this.toggle(i.defaultIndex),this},e.fn.tab.noConflict=function(){return i}}($),function(e){e.weui.toast=function(){var i=arguments.length<=0||void 0===arguments[0]?"toast":arguments[0],t=arguments[1];"number"==typeof t&&(t={duration:t}),t=e.extend({duration:3e3},t);var n='<div>\n            <div class="weui_mask_transparent"></div>\n            <div class="weui_toast">\n                <i class="weui_icon_toast"></i>\n                <p class="weui_toast_content">'+i+"</p>\n            </div>\n        </div>",a=e(n);e("body").append(a),setTimeout(function(){a.remove(),a=null},t.duration)}}($),function(e){var i=e.fn.uploader;e.fn.uploader=function(i){i=e.extend({title:"图片上传",maxCount:4,maxWidth:500,onChange:e.noop},i);var t='<div class="weui_uploader">\n                        <div class="weui_uploader_hd weui_cell">\n                            <div class="weui_cell_bd weui_cell_primary">'+i.title+'</div>\n                            <div class="weui_cell_ft">0/'+i.maxCount+'</div>\n                        </div>\n                        <div class="weui_uploader_bd">\n                            <ul class="weui_uploader_files">\n                            </ul>\n                            <div class="weui_uploader_input_wrp">\n                                <input class="weui_uploader_input" type="file" accept="image/jpg,image/jpeg,image/png,image/gif">\n                            </div>\n                        </div>\n                    </div>';this.html(t);var n=this,a=this.find(".weui_uploader_files"),s=this.find(".weui_uploader_input"),o=0;return s.on("change",function(t){var s=t.target.files;if(0!==s.length)return o>=i.maxCount?void e.weui.alert("最多只能上传"+i.maxCount+"张图片"):void e.each(s,function(e,t){var s=new FileReader;s.onload=function(e){var s=new Image;s.onload=function(){var e=Math.min(i.maxWidth,s.width),l=s.height*(e/s.width),u=document.createElement("canvas"),r=u.getContext("2d");u.width=e,u.height=l;var d=navigator.userAgent.match(/iPhone OS ([^\s]*)/);d&&7==d[1].substr(0,1)&&3264==s.width&&2448==s.height?r.drawImage(s,0,0,e,2*l):r.drawImage(s,0,0,e,l);var c=u.toDataURL("image/png");a.append('<li class="weui_uploader_file " style="background-image:url('+c+')"></li>'),++o,n.find(".weui_uploader_hd .weui_cell_ft").text(o+"/"+i.maxCount),i.onChange.call(n,{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,data:c})},s.src=e.target.result},s.readAsDataURL(t)})}),this.update=function(e){var i=a.find(".weui_uploader_file").last();i.addClass("weui_uploader_status"),i.html('<div class="weui_uploader_status_content">'+e+"</div>")},this.success=function(){var e=a.find(".weui_uploader_file").last();e.removeClass("weui_uploader_status"),e.html("")},this.error=function(){var e=a.find(".weui_uploader_file").last();e.addClass("weui_uploader_status"),e.html('<div class="weui_uploader_status_content"><i class="weui_icon_warn"></i></div>')},this},e.fn.uploader.noConflict=function(){return i}}($);
//# sourceMappingURL=weui.min.js.map
