{"version":3,"sources":["weui.js","dialog.js","alert.js","toptips.js","actionSheet.js","confirm.js","form.js","loading.js","progress.js","searchbar.js","swipeout.js","tab.js","toast.js","uploader.js"],"names":["$","weui","version","$dialog","dialog","options","extend","title","content","className","buttons","label","type","onClick","noop","map","button","join","html","append","on","this","index","cb","call","closeDialog","off","remove","alert","yes","$topTips","timer","topTips","arguments","length","undefined","clearTimeout","duration","setTimeout","$actionSheetWrapper","actionSheet","menus","actions","cells","item","idx","action","find","show","addClass","hideActionSheet","$mask","$actionsheet","removeClass","confirm","no","_validate","$input","input","val","tagName","reg","getAttribute","RegExp","test","checked","_showErrorMsg","error","$dom","msg","tips","attr","parents","oldFnForm","fn","form","each","ele","$form","errorMsg","$this","noConflict","oldFnValidate","validate","callback","$requireds","i","len","eq","$loading","loading","hideLoading","progress","_this","value","$progress","opr","width","searchBar","bindEvent","target","event","focusingClass","searchText","cancelText","$search","$searchBar","$searchText","$searchInput","hide","e","preventDefault","document","activeElement","id","trigger","onsubmit","swipeOutOpenedEl","oldFnSwipeOut","swipeOut","handleTouchStart","originalEvent","is","isMoved","isTouched","isScrolling","touchesStart","x","targetTouches","pageX","y","pageY","touchStartTime","Date","now","handleTouchMove","swipeOutEl","swipeOutContent","actionsLeft","actionsRight","actionsLeftWidth","actionsRightWidth","buttonsLeft","buttonsRight","overswipeLeftButton","overswipeRightButton","outerWidth","children","opened","hasClass","openedActions","noFollow","touchesDiff","translate","css","direction","buttonOffset","swipeOutClose","swipeOutOpen","overswipeLeft","overswipeRight","$button","Math","pow","_buttonOffset","offsetLeft","$buttons","left","max","offsetWidth","cass","min","handleTouchEnd","timeDiff","actionsWidth","abs","toggleClass","newTranslate","click","offsetRight","oldFnSwipeOutOpen","dir","el","swipeOutActions","swipeOutActionsWidth","_i","oldFnSwipeOutClose","onSwipeoutClose","allowSwipeout","closeTO","oldFnSwipeOutDelete","swipeOutDelete","oldFnTab","tab","defaultIndex","activeClass","$tabbarItems","$tabBdItems","toggle","$defaultTabbarItem","siblings","$defaultTabBdItem","self","toast","$toast","oldFnUploader","uploader","maxCount","maxWidth","onChange","$uploader","$files","$file","count","files","file","reader","FileReader","onload","img","Image","w","h","height","canvas","createElement","ctx","getContext","iphone","navigator","userAgent","match","substr","drawImage","base64","toDataURL","text","lastModified","lastModifiedDate","name","size","data","src","result","readAsDataURL","update","$preview","last","success"],"mappings":"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","file":"weui.min.js","sourcesContent":["(function ($) {\n    $.weui = {\n        version: '0.1.0'\n    };\n})($);","(function ($) {\n\n    let $dialog = null;\n\n    /**\n     *  weui dialog\n     * @param {Object} options\n     */\n    $.weui.dialog = function (options) {\n        options = $.extend({\n            title: '标题',\n            content: '内容',\n            className: '',\n            buttons: [{\n                label: '确定',\n                type: 'primary',\n                onClick: $.noop\n            }]\n        }, options);\n\n        const buttons = options.buttons.map((button) => {\n            return `<a href=\"javascript:;\" class=\"weui_btn_dialog ${button.type}\">${button.label}</a>`;\n        }).join('\\n');\n        const html = `<div class=\"${options.className}\">\n                <div class=\"weui_mask\"></div>\n                <div class=\"weui_dialog\">\n                    <div class=\"weui_dialog_hd\">\n                        <strong class=\"weui_dialog_title\">\n                            ${options.title}\n                        </strong>\n                    </div>\n                    <div class=\"weui_dialog_bd\">\n                        ${options.content}\n                    </div>\n                    <div class=\"weui_dialog_ft\">\n                        ${buttons}\n                    </div>\n                </div>\n            </div>`;\n        $dialog = $(html);\n        $('body').append($dialog);\n        $dialog.on('click', '.weui_btn_dialog', function () {\n            const button = options.buttons[$(this).index()];\n            const cb = button.onClick || $.noop;\n            cb.call();\n            $.weui.closeDialog();\n        });\n    };\n\n    /**\n     * close dialog\n     */\n    $.weui.closeDialog = function () {\n        if ($dialog) {\n            $dialog.off('click', '.weui_btn_dialog');\n            $dialog.remove();\n            $dialog = null;\n        }\n    };\n\n})($);","(function ($) {\n    /**\n     * alert\n     * @param {String} content\n     * @param {Object} options\n     * @param {Function} yes\n     */\n    $.weui.alert = function (content, options, yes) {\n\n        const type = typeof options === 'function';\n        if (type) {\n            yes = options;\n        }\n\n        options = $.extend({\n            title: '警告',\n            content: content || '警告内容',\n            className: '',\n            buttons: [{\n                label: '确定',\n                type: 'primary',\n                onClick: yes\n            }]\n        }, type ? {} : options);\n        options.className = `weui_dialog_alert ${options.className}`;\n\n        $.weui.dialog(options);\n    };\n})($);","(function ($) {\n\n    let $topTips = null;\n    let timer = null;\n\n    /**\n     * show top tips\n     * @param {String} content\n     * @param {Object|Number} options\n     */\n    $.weui.topTips = function (content = 'topTips', options) {\n\n        if ($topTips) {\n            $topTips.remove();\n            timer && clearTimeout(timer);\n            $topTips = null;\n        }\n\n        if (typeof options === 'number') {\n            options = {\n                duration: options\n            };\n        }\n\n        options = $.extend({\n            duration: 3000\n        }, options);\n        const html = `<div class=\"weui_toptips weui_warn\" style=\"display: block;\">${content}</div>`;\n        $topTips = $(html);\n        $('body').append($topTips);\n\n        timer = setTimeout(function () {\n            $topTips && $topTips.remove();\n            $topTips = null;\n        }, options.duration);\n    };\n\n})($);","(function ($) {\n\n    let $actionSheetWrapper = null;\n\n    /**\n     * show actionSheet\n     * @param {Array} menus\n     * @param {Array} actions\n     */\n    $.weui.actionSheet = function (menus = [], actions = [{label: '取消'}]) {\n        const cells = menus.map((item, idx) => {\n            return `<div class=\"weui_actionsheet_cell\">${item.label}</div>`;\n        }).join('');\n        const action = actions.map((item, idx) => {\n            return `<div class=\"weui_actionsheet_cell\">${item.label}</div>`;\n        }).join('');\n        const html = `<div>\n            <div class=\"weui_mask_transition\"></div>\n            <div class=\"weui_actionsheet\">\n                <div class=\"weui_actionsheet_menu\">\n                    ${cells}\n                </div>\n                <div class=\"weui_actionsheet_action\">\n                    ${action}\n                </div>\n            </div>\n        </div>`;\n\n        $actionSheetWrapper = $(html);\n        $('body').append($actionSheetWrapper);\n\n        // add class\n        $actionSheetWrapper.find('.weui_mask_transition').show().addClass('weui_fade_toggle');\n        $actionSheetWrapper.find('.weui_actionsheet').addClass('weui_actionsheet_toggle');\n\n        // bind event\n        $actionSheetWrapper.on('click', '.weui_actionsheet_menu .weui_actionsheet_cell', function (){\n            const item = menus[$(this).index()];\n            const cb = item.onClick || $.noop;\n            cb.call();\n            $.weui.hideActionSheet();\n        }).on('click', '.weui_mask_transition', function (){\n            $.weui.hideActionSheet();\n        }).on('click', '.weui_actionsheet_action .weui_actionsheet_cell', function (){\n            const item = actions[$(this).index()];\n            const cb = item.onClick || $.noop;\n            cb.call();\n            $.weui.hideActionSheet();\n        });\n    };\n\n    $.weui.hideActionSheet = function (){\n        if(!$actionSheetWrapper){\n            return;\n        }\n\n        var $mask = $actionSheetWrapper.find('.weui_mask_transition');\n        var $actionsheet = $actionSheetWrapper.find('.weui_actionsheet');\n\n        $mask.removeClass('weui_fade_toggle');\n        $actionsheet.removeClass('weui_actionsheet_toggle');\n\n        $actionsheet.on('transitionend', function () {\n            $actionSheetWrapper.remove();\n            $actionSheetWrapper = null;\n        }).on('webkitTransitionEnd', function () {\n            $actionSheetWrapper.remove();\n            $actionSheetWrapper = null;\n        });\n    };\n\n})($);","(function ($) {\n    /**\n     * confirm\n     * @param {String} content\n     * @param {String} options\n     * @param {Function} yes\n     * @param {Function} no\n     */\n    $.weui.confirm = function (content, options, yes, no) {\n\n        var type = typeof options === 'function';\n        if (type) {\n            no = yes;\n            yes = options;\n        }\n\n        options = $.extend({\n            title: '确认',\n            content: content || '确认内容',\n            className: '',\n            buttons: [{\n                label: '取消',\n                type: 'default',\n                onClick: no || $.noop\n            }, {\n                label: '确定',\n                type: 'primary',\n                onClick: yes || $.noop\n            }]\n        }, type ? {} : options);\n        options.className = `weui_dialog_confirm ${options.className}`;\n\n        $.weui.dialog(options);\n    };\n})($);","/**\n * Created by bearyan on 2016/2/16.\n */\n(function(){\n    function _validate($input){\n        var input = $input[0], val = $input.val();\n\n        if(input.tagName == \"INPUT\" || input.tagName == \"TEXTAREA\"){\n            var reg =\n                input.getAttribute(\"required\")\n                || input.getAttribute(\"pattern\")\n                || \"\";\n\n            if(!$input.val().length){\n                return \"empty\";\n            }else if(reg){\n                return new RegExp(reg).test(val) ? null : \"notMatch\";\n            }else{\n                return null;\n            }\n        }\n        else if(\n            input.getAttribute(\"type\") == \"checkbox\"\n            || input.getAttribute(\"type\") == \"radio\"\n        ){\n            // 没有正则表达式：checkbox/radio要checked\n            return input.checked ? null : \"empty\";\n        }else if(val.length){\n            // 有输入值\n            return null;\n        }\n\n        return \"empty\";\n    }\n    function _showErrorMsg(error){\n        if(error){\n            var $dom = error.$dom, msg = error.msg,\n                tips =\n                    $dom.attr(msg + \"Tips\")\n                    || $dom.attr(\"tips\")\n                    || $dom.attr(\"placeholder\");\n            if(tips) $.weui.topTips(tips);\n            $dom.parents(\".weui_cell\").addClass(\"weui_cell_warn\");\n        }\n    }\n\n    var oldFnForm = $.fn.form;\n    $.fn.form = function(){\n        return this.each(function(index, ele){\n            var $form = $(ele);\n            $form.find(\"[required]\")\n                .on(\"blur\", function(){\n                    var $this = $(this), errorMsg;\n                    if($this.val().length < 1) return; // 当空的时候不校验，以防不断弹出toptips\n\n                    errorMsg = _validate($this);\n                    if(errorMsg){\n                        _showErrorMsg({\n                            $dom: $this,\n                            msg: errorMsg\n                        });\n                    }\n                })\n                .on(\"focus\", function(){\n                    var $this = $(this);\n                    $this.parents(\".weui_cell\").removeClass(\"weui_cell_warn\");\n                })\n            ;\n        });\n    };\n    $.fn.form.noConflict = function(){\n        return oldFnForm;\n    };\n\n    var oldFnValidate = $.fn.validate;\n    $.fn.validate = function(callback){\n        return this.each(function(){\n            var $requireds = $(this).find(\"[required]\");\n            if(typeof callback != \"function\") callback = _showErrorMsg;\n\n            for(var i = 0, len = $requireds.length; i < len; ++i){\n                var $dom = $requireds.eq(i), errorMsg = _validate($dom);\n                if(errorMsg){\n                    callback({\n                        $dom: $dom,\n                        msg: errorMsg\n                    });\n                    break;\n                }\n            }\n            callback(null);\n        });\n    };\n    $.fn.validate.noConflict = function(){\n        return oldFnValidate;\n    };\n})();","(function ($) {\n    let $loading = null;\n\n    /**\n     * show loading\n     * @param {String} content\n     */\n    $.weui.loading = function (content = 'loading...') {\n        const html = `<div class=\"weui_loading_toast\">\n        <div class=\"weui_mask_transparent\"></div>\n        <div class=\"weui_toast\">\n            <div class=\"weui_loading\">\n                <div class=\"weui_loading_leaf weui_loading_leaf_0\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_1\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_2\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_3\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_4\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_5\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_6\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_7\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_8\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_9\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_10\"></div>\n                <div class=\"weui_loading_leaf weui_loading_leaf_11\"></div>\n            </div>\n            <p class=\"weui_toast_content\">${content}</p>\n        </div>\n    </div>`;\n        $loading = $(html);\n        $('body').append($loading);\n    };\n\n    /**\n     * hide loading\n     */\n    $.weui.hideLoading = function () {\n        $loading && $loading.remove();\n        $loading = null;\n    };\n})($);","(function ($) {\n    $.fn.progress = function (options) {\n        options = $.extend({\n            value: 0\n        }, options);\n        if (options.value < 0) {\n            options.value = 0;\n        }\n\n        if (options.value > 100) {\n            options.value = 100;\n        }\n\n        const $progress = this.find('.weui_progress_inner_bar');\n        if($progress.length === 0){\n            const opr = typeof options.onClick === 'function' ? `<a href=\"javascript:;\" class=\"weui_progress_opr\">\n                    <i class=\"weui_icon_cancel\"></i>\n                </a>` : '';\n            const html = `<div class=\"weui_progress\">\n                <div class=\"weui_progress_bar\">\n                    <div class=\"weui_progress_inner_bar\" style=\"width: ${options.value}%;\"></div>\n                </div>\n                ${opr}\n            </div>`;\n            if (typeof options.onClick === 'function'){\n                this.on('click', '.weui_progress_opr', () => {\n                    options.onClick.call(this);\n                });\n            }\n            return this.html(html);\n        }\n\n        //return $progress.animate({\n        //    width: `${options.value}%`\n        //}, 100);\n        return $progress.width(`${options.value}%`);\n    };\n})($);","(function ($) {\n    $.fn.searchBar = function (options) {\n        options = $.extend({\n            focusingClass:'weui_search_focusing',\n            searchText:\"搜索\",\n            cancelText:\"取消\"\n        },options);\n\n        let html = `<div class=\"weui_search_bar\">\n                    <form class=\"weui_search_outer\">\n                        <div class=\"weui_search_inner\">\n                            <i class=\"weui_icon_search\"></i>\n                            <input type=\"search\" class=\"weui_search_input\" id=\"weui_search_input\" placeholder=\"${options.searchText}\" required/>\n                            <a href=\"javascript:\" class=\"weui_icon_clear\"></a>\n                        </div>\n                        <label for=\"weui_search_input\" class=\"weui_search_text\">\n                            <i class=\"weui_icon_search\"></i>\n                            <span>${options.searchText}</span>\n                        </label>\n                    </form>\n                    <a href=\"javascript:\" class=\"weui_search_cancel\">${options.cancelText}</a>\n                </div>`;\n\n        let $search = $(html);\n        this.append($search);\n\n        const $searchBar = this.find('.weui_search_bar');\n        const $searchText = this.find('.weui_search_text');\n        const $searchInput = this.find('.weui_search_input');\n\n        this.on('focus', '#weui_search_input', function () {\n            $searchText.hide();\n            $searchBar.addClass(options.focusingClass);\n            bindEvent($searchInput, 'onfocus', options);\n        }).on('blur', '#weui_search_input', function () {\n            $searchBar.removeClass(options.focusingClass);\n            !!$(this).val() ? $searchText.hide() : $searchText.show();\n            bindEvent($searchInput, 'onblur', options);\n        }).on('touchend', '.weui_search_cancel', function () {\n            $searchInput.val('');\n            bindEvent($searchInput, 'oncancel', options);\n        }).on('touchend', '.weui_icon_clear', function (e) {\n            //阻止默认动作\n            e.preventDefault();\n            $searchInput.val('');\n            if(document.activeElement.id != 'search_input') {\n                $searchInput.trigger('focus');\n            }\n            bindEvent($searchInput, 'onclear', options);\n        }).on('input', '.weui_search_input', function () {\n            bindEvent($searchInput, 'input', options);\n        }).on('submit', '.weui_search_outer', function () {\n            if(typeof(options.onsubmit) == 'function'){\n                bindEvent($searchInput, 'onsubmit', options);\n                return false;\n            }\n        });\n\n        function bindEvent(target,event,options){\n            if(typeof(options[event]) == 'function'){\n                let value = $(target).val();\n                options[event].call(target, value);\n            }\n        }\n    };\n})($);","// 基于 https://github.com/nolimits4web/Framework7/blob/master/src/js/swipeout.js 修改\n(function ($) {\n    $.weui.swipeOutOpenedEl = undefined;\n\n    let oldFnSwipeOut = $.fn.swipeOut;\n    $.fn.swipeOut = function (options) {\n        options = $.extend({\n            // 菜单是否没有滑动惯性\n            noFollow: false\n        }, options);\n\n        let isTouched, isMoved, isScrolling, touchesStart = {}, touchStartTime, touchesDiff, swipeOutEl, swipeOutContent, actionsRight, actionsLeft, actionsLeftWidth, actionsRightWidth, translate, opened, openedActions, buttonsLeft, buttonsRight, direction, overswipeLeftButton, overswipeRightButton, overswipeLeft, overswipeRight;\n\n        $(document).on('touchstart', (event) => {\n            // 全局触摸可以关闭当前的菜单\n            let e = event.originalEvent;\n            let target = $(e.target);\n            if ($.weui.swipeOutOpenedEl) {\n                if (!target.hasClass('weui_swipeout_action')) {\n                    $.weui.swipeOutOpenedEl.swipeOutClose();\n                }\n            }\n        });\n\n        function handleTouchStart(event) {\n            let e = event.originalEvent;\n            if ($.weui.swipeOutOpenedEl) {\n                let target = $(e.target);\n                if ($(target[0]).is($.weui.swipeOutOpenedEl) || target.parents('.weui_cell_swipeout').is($.weui.swipeOutOpenedEl)) {\n                    return;\n                }\n            }\n            isMoved = false;\n            isTouched = true;\n            isScrolling = undefined;\n            touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n            touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n            touchStartTime = Date.now();\n        }\n\n        function handleTouchMove(event) {\n            let e = event.originalEvent;\n            if (!isTouched) {\n                return;\n            }\n            let pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n            let pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n            if (isScrolling) {\n                isTouched = false;\n                return;\n            }\n\n            if (!isMoved) {\n                swipeOutEl = $(this);\n                swipeOutContent = swipeOutEl.find('.weui_swipeout_content');\n                actionsLeft = swipeOutEl.find('.weui_swipeout_actions_left');\n                actionsRight = swipeOutEl.find('.weui_swipeout_actions_right');\n\n                actionsLeftWidth = actionsRightWidth = buttonsLeft = buttonsRight = overswipeLeftButton = overswipeRightButton = null;\n\n                if (actionsLeft.length > 0) {\n                    actionsLeftWidth = actionsLeft.outerWidth();\n                    buttonsLeft = actionsLeft.children('a');\n                    overswipeLeftButton = actionsLeft.find('.weui_swipeout_overswipe');\n                }\n                if (actionsRight.length > 0) {\n                    actionsRightWidth = actionsRight.outerWidth();\n                    buttonsRight = actionsRight.children('a');\n                    overswipeRightButton = actionsRight.find('.weui_swipeout_overswipe');\n                }\n\n                opened = swipeOutEl.hasClass('weui_swipeout_opened');\n                if (opened) {\n                    openedActions = swipeOutEl.find('.weui_swipeout_actions_left.weui_swipeout_actions_opened').length > 0 ? 'left' : 'right';\n                }\n                swipeOutEl.removeClass('transitioning');\n                if (options.noFollow) {\n                    swipeOutEl.find('.weui_swipeout_opened').removeClass('.weui_swipeout_opened');\n                    swipeOutEl.removeClass('.weui_swipeout_opened');\n                }\n            }\n            isMoved = true;\n            event.preventDefault();\n\n            touchesDiff = pageX - touchesStart.x;\n            translate = touchesDiff;\n\n\n            if (opened) {\n                if (openedActions === 'right') {\n                    translate = translate - actionsRightWidth;\n                } else {\n                    translate = translate + actionsLeftWidth;\n                }\n            }\n\n\n            // 向右滑动而且左边没有按钮 || 向左滑动而且右边没有按钮\n            if (translate > 0 && actionsLeft.length === 0 || translate < 0 && actionsRight.length === 0) {\n                if (!opened) {\n                    isTouched = isMoved = false;\n                    swipeOutContent.css('transform', '');\n                    if (buttonsLeft && buttonsLeft.length > 0) {\n                        buttonsLeft.css('transform', '');\n                    }\n                    if (buttonsRight && buttonsRight.length > 0) {\n                        buttonsRight.css('transform', '');\n                    }\n                    return;\n                }\n                translate = 0;\n            }\n\n            if (translate < 0) {\n                direction = 'to-left';\n            } else if (translate > 0) {\n                direction = 'to-right';\n            } else {\n                if (direction) {\n                    direction = 'direction';\n                } else {\n                    direction = 'to-left';\n                }\n            }\n\n            let i, buttonOffset, progress;\n            if (options.noFollow) {\n                if (opened) {\n                    if (openedActions === 'right' && touchesDiff > 0) {\n                        swipeOutEl.swipeOutClose()\n                    }\n                    if (openedActions === 'left' && touchesDiff < 0) {\n                        swipeOutEl.swipeOutClose()\n                    }\n                } else {\n                    if (touchesDiff < 0 && actionsRight.length > 0) {\n                        swipeOutEl.swipeOutOpen('right');\n                    }\n                    if (touchesDiff > 0 && actionsLeft.length > 0) {\n                        swipeOutEl.swipeOutOpen('left');\n                    }\n                }\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n            overswipeLeft = false;\n            overswipeRight = false;\n            let $button;\n            if (actionsRight.length > 0 && direction === 'to-left') {\n                progress = translate / actionsRightWidth;\n                if (translate < -actionsRightWidth) {\n                    translate = -actionsRightWidth - Math.pow(-translate - actionsRightWidth, 0.8);\n                    if (overswipeRightButton.length > 0) {\n                        overswipeRight = true;\n                    }\n                }\n                for (i = 0; i < buttonsRight.length; i++) {\n                    if (typeof buttonsRight[i]._buttonOffset === 'undefined') {\n                        buttonsRight[i]._buttonOffset = buttonsRight[i].offsetLeft;\n                    }\n                    buttonOffset = buttonsRight[i]._buttonOffset;\n                    $button = $(buttonsRight[i]);\n                    if (overswipeRightButton.length > 0 && $buttons.hasClass('swipeout-overswipe')) {\n                        $buttons.css({left: (overswipeRight ? -buttonOffset : 0) + 'px'});\n                        if (overswipeRight) {\n                            $button.addClass('swipeout-overswipe-active');\n                        } else {\n                            $button.removeClass('swipeout-overswipe-active');\n                        }\n                    }\n                    // 按钮不要回弹的效果\n                    $button.css('transform', `translate3d(${Math.max(translate, -actionsRightWidth)}px,0,0)`);\n                }\n\n                // content 最多滑多 30px\n                swipeOutContent.css('transform', `translate3d(${Math.max(translate, -actionsRightWidth - 30)}px,0,0)`);\n            }\n            if (actionsLeft.length > 0 && direction === 'to-right') {\n                progress = translate / actionsLeftWidth;\n                if (translate > actionsLeftWidth) {\n                    translate = actionsLeftWidth + Math.pow(translate - actionsLeftWidth, 0.8);\n                    if (overswipeLeftButton.length > 0) {\n                        overswipeLeft = true\n                    }\n                }\n                for (i = 0; i < buttonsLeft.length; i++) {\n                    if (typeof buttonsLeft[i]._buttonOffset === 'undefined') {\n                        buttonsLeft[i]._buttonOffset = actionsLeftWidth - buttonsLeft[i].offsetLeft - buttonsLeft[i].offsetWidth;\n                    }\n                    buttonOffset = buttonsLeft[i]._buttonOffset;\n                    $button = $(buttonsLeft[i]);\n                    if (overswipeLeftButton.length > 0 && $button.hasClass('swipeout-overswipe')) {\n                        $buttons.cass({left: (overswipeLeft ? buttonOffset : 0) + 'px'});\n                        if (overswipeLeft) {\n                            $button.addClass('swipeout-overswipe-active');\n                        } else {\n                            $button.removeClass('swipeout-overswipe-active')\n                        }\n                    }\n                    if (buttonsLeft.length > 1) {\n                        $button.css('z-index', buttonsLeft.length - i);\n                    }\n                    // 按钮不要回弹的效果\n                    $button.css('transform', `translate3d(${Math.min(translate, actionsLeftWidth)}px,0,0)`);\n                }\n\n                // content 最多滑多 30px\n                swipeOutContent.css('transform', `translate3d(${Math.min(translate, actionsLeftWidth + 30)}px,0,0)`);\n            }\n        }\n\n        function handleTouchEnd(event) {\n            let e = event.originalEvent;\n\n            if (!isTouched || !isMoved) {\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n\n            isTouched = false;\n            isMoved = false;\n            let timeDiff = Date.now() - touchStartTime;\n            let action, actionsWidth, actions, buttons, i;\n\n            actions = direction === 'to-left' ? actionsRight : actionsLeft;\n            actionsWidth = direction === 'to-left' ? actionsRightWidth : actionsLeftWidth;\n\n            if (timeDiff < 300 && (touchesDiff < -10 && direction === 'to-left' || touchesDiff > 10 && direction === 'to-right') || timeDiff >= 300 && Math.abs(translate) > actionsWidth / 2) {\n                action = 'open'\n            } else {\n                action = 'close';\n            }\n\n\n            if (timeDiff < 300) {\n                if (Math.abs(translate) === 0) {\n                    action = 'close';\n                }\n                if (Math.abs(translate) === actionsWidth) {\n                    action = 'open';\n                }\n            }\n\n            if (action === 'open') {\n                $.weui.swipeOutOpenedEl = swipeOutEl;\n                swipeOutEl.toggleClass('open');\n                swipeOutEl.addClass('weui_swipeout_opened transitioning');\n                let newTranslate = direction === 'to-left' ? -actionsWidth : actionsWidth;\n                swipeOutContent.css('transform', `translate3d(${newTranslate}px,0,0)`);\n                actions.addClass('weui_swipeout_actions_opened');\n                buttons = direction === 'to-left' ? buttonsRight : buttonsLeft;\n                if (buttons) {\n                    for (i = 0; i < buttons.length; i++) {\n                        $(buttons[i]).css('transform', `translate3d(${newTranslate }px, 0,0)`);\n                    }\n                }\n\n                if (overswipeRight) {\n                    actionsRight.find('.weui_swipeout_overswipe')[0].click();\n                }\n                if (overswipeLeft) {\n                    actionsLeft.find('.weui_swipeout_overswipe')[0].click();\n                }\n            } else {\n                $.weui.swipeOutOpenedEl = undefined;\n                swipeOutEl.toggleClass('close')\n                swipeOutEl.addClass('transitioning').removeClass('weui_swipeout_opened');\n                swipeOutContent.css('transform', '');\n                actions.removeClass('weui_swipeout_actions_opened');\n            }\n\n            let buttonOffset;\n            if (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft != buttons) {\n                for (i = 0; i < buttonsLeft.length; i++) {\n                    buttonOffset = buttonsLeft[i]._buttonOffset;\n                    if (typeof buttonOffset === 'undefined') {\n                        buttonsLeft[i]._buttonOffset = actionsLeftWidth -  buttonsLeft[i].offsetLeft - buttonsLeft[i].offsetWidth;\n                    }\n                    $(buttonsLeft[i]).css('transform', `translate3d(${buttonOffset}px,0,0)`);\n                }\n            }\n            if (buttonsRight && buttonsRight.length > 0 && buttonsRight != buttons) {\n                for (i = 0; i < buttonsRight.length; i++) {\n                    buttonOffset = buttonsRight[i]._buttonOffset;\n                    if (typeof buttonOffset === 'undefined') {\n                        buttonsRight[i]._buttonOffset = actionsRightWidth -  buttonsRight[i].offsetRight - buttonsRight[i].offsetWidth;\n                    }\n                    $(buttonsRight[i]).css('transform', `translate3d(${buttonOffset }px,0,0)`);\n                }\n            }\n        }\n\n        $('.weui_cell_swipeout').on('touchstart', handleTouchStart);\n        $('.weui_cell_swipeout').on('touchmove', handleTouchMove);\n        $('.weui_cell_swipeout').on('touchend', handleTouchEnd);\n\n        return this;\n    }\n    $.fn.swipeOut.noConflict = () => {\n        return oldFnSwipeOut;\n    }\n\n\n    // 打开菜单\n    let oldFnSwipeOutOpen = $.fn.swipeOutOpen;\n    $.fn.swipeOutOpen = function (dir) {\n        let el = $(this);\n\n        if (el.length === 0) return;\n        if (el.hasClass('weui_swipeout_opened')) {\n            return;\n        }\n        if (!dir) {\n            if (el.find('.weui_swipeout_actions_right').length > 0) {\n                dir = 'right';\n            } else {\n                dir = 'left';\n            }\n        }\n        let swipeOutActions = el.find(`.weui_swipeout_actions_${dir}`);\n        if (swipeOutActions.length === 0) {\n            return;\n        }\n        el.toggleClass('open').addClass('weui_swipeout_opened').removeClass('transitioning');\n        swipeOutActions.addClass('weui_swipeout_actions_opened');\n        let buttons = swipeOutActions.children('a');\n        let swipeOutActionsWidth = swipeOutActions.outerWidth();\n        let translate = dir === 'right' ? -swipeOutActionsWidth : swipeOutActionsWidth;\n        if (buttons.length > 1) {\n            for (let i = 0; i < buttons.length; i++) {\n                if (dir === 'right') {\n                    $(buttons[i]).css('transform', `translate3d(${-buttons[i].offsetLeft}px,0,0)`);\n                } else {\n                    $(buttons[i]).css('z-index', buttons.length - i)\n                                 .css('transform', `translate3d(${swipeOutActionsWidth - buttons[i].offsetWidth - buttons[i].offsetLeft}px,0,0)`);\n                }\n            }\n        }\n        el.addClass('transitioning');\n        for (let i = 0; i < buttons.length; i++) {\n            $(buttons[i]).css('transform', `translate3d(${translate}px,0,0)`);\n        }\n        el.find('.weui_swipeout_content').css('transform', `translate3d(${translate}px,0,0)`).on('transitionend', () => {\n            el.toggleClass('opened');\n        })\n        $.weui.swipeOutOpenedEl = el;\n    }\n    $.fn.swipeOutOpen.noConflict = () => {\n        return oldFnSwipeOutOpen;\n    }\n\n\n    // 关闭菜单\n    let oldFnSwipeOutClose = $.fn.swipeOutClose;\n    $.fn.swipeOutClose = function () {\n        let el = $(this);\n        if (!el.hasClass('weui_swipeout_opened')) {\n            return;\n        }\n        let dir = el.find('.weui_swipeout_actions_opened').hasClass('weui_swipeout_actions_right') ? 'right' : 'left';\n        let swipeOutActions = el.find('.weui_swipeout_actions_opened').removeClass('weui_swipeout_actions_opened')\n        let buttons = swipeOutActions.children('a');\n        let swipeOutActionsWidth = swipeOutActions.outerWidth();\n        $.weui.allowSwipeout = false;\n        el.toggleClass('close')\n        el.removeClass('weui_swipeout_opened').addClass('transitioning');\n\n        let closeTO;\n        function onSwipeoutClose() {\n            $.weui.allowSwipeout = true;\n            if (el.hasClass('weui_swipeou_openedt')) {\n                return;\n            }\n            el.removeClass('transitioning');\n            buttons.css('tranform', '');\n            el.toggleClass('closed');\n        }\n        el.find('.weui_swipeout_content').css('transform', '').on('transitionend', onSwipeoutClose);\n        closeTO = setTimeout(onSwipeoutClose, 500);\n        for (let i = 0; i < buttons.length; i++) {\n            if (dir === 'right') {\n                $(buttons[i]).css('transform', `translate3d(${-buttons[i].offsetLeft}px, 0,0)`);\n            } else {\n                $(buttons[i]).css('transform', `translate3d(${swipeOutActionsWidth - buttons[i].offsetWidth - buttons[i].offsetLeft}px, 0,0)`);\n            }\n            $(buttons[i]).css({left: 0 + 'px'}).removeClass('weui_swipeout_overswipe_active');\n        }\n        if ($.weui.swipeOutOpenedEl && $.weui.swipeOutOpenedEl[0] === el[0]) {\n            $.weui.swipeOutOpenedEl = undefined;\n        }\n    }\n    $.fn.swipeOutClose.noConflict = () => {\n        return oldFnSwipeOutClose;\n    }\n\n\n    // TODO 滑动删除\n    let oldFnSwipeOutDelete = $.fn.swipeOutDelete;\n    $.fn.swipeOutDelete = function () {\n    }\n    $.fn.swipeOutDelete.noConflict = () => {\n        return oldFnSwipeOutDelete;\n    }\n})($);\n","(function ($) {\n    var oldFnTab = $.fn.tab;\n    $.fn.tab = function (options){\n        options = $.extend({\n            defaultIndex: 0,\n            activeClass: `weui_bar_item_on`\n        }, options);\n        const $tabbarItems = this.find('.weui_tabbar_item, .weui_navbar_item');\n        const $tabBdItems = this.find('.weui_tab_bd_item');\n\n        // iOS 下不能点击 navbar, 先用js设一下z-index, 后面在 css 设置\n        this.find('.weui_navbar').css('z-index', 1);\n\n        this.toggle = function (index){\n            const $defaultTabbarItem = $tabbarItems.eq(index);\n            $defaultTabbarItem.addClass(options.activeClass).siblings().removeClass(options.activeClass);\n\n            const $defaultTabBdItem = $tabBdItems.eq(index);\n            $defaultTabBdItem.show().siblings().hide();\n        };\n        const self = this;\n\n        this.on('click', '.weui_tabbar_item, .weui_navbar_item', function (e){\n            const index = $(this).index();\n            self.toggle(index);\n        });\n\n\n\n        this.toggle(options.defaultIndex);\n\n        return this;\n    };\n    $.fn.tab.noConflict = function(){\n        return oldFnTab;\n    };\n})($);","(function ($) {\n\n    /**\n     * show toast\n     * @param {String} content\n     * @param {Object|Number} options\n     */\n    $.weui.toast = function (content = 'toast', options) {\n\n        if(typeof options === 'number'){\n            options = {\n                duration: options\n            };\n        }\n\n        options = $.extend({\n            duration: 3000\n        }, options);\n        const html = `<div>\n            <div class=\"weui_mask_transparent\"></div>\n            <div class=\"weui_toast\">\n                <i class=\"weui_icon_toast\"></i>\n                <p class=\"weui_toast_content\">${content}</p>\n            </div>\n        </div>`;\n        let $toast = $(html);\n        $('body').append($toast);\n\n        setTimeout(function (){\n            $toast.remove();\n            $toast = null;\n        }, options.duration);\n    };\n\n})($);","(function ($) {\n    var oldFnUploader = $.fn.uploader;\n    $.fn.uploader = function (options) {\n        options = $.extend({\n            title: '图片上传',\n            maxCount: 4,\n            maxWidth: 500,\n            onChange: $.noop\n        }, options);\n\n        const html = `<div class=\"weui_uploader\">\n                        <div class=\"weui_uploader_hd weui_cell\">\n                            <div class=\"weui_cell_bd weui_cell_primary\">${options.title}</div>\n                            <div class=\"weui_cell_ft\">0/${options.maxCount}</div>\n                        </div>\n                        <div class=\"weui_uploader_bd\">\n                            <ul class=\"weui_uploader_files\">\n                            </ul>\n                            <div class=\"weui_uploader_input_wrp\">\n                                <input class=\"weui_uploader_input\" type=\"file\" accept=\"image/jpg,image/jpeg,image/png,image/gif\">\n                            </div>\n                        </div>\n                    </div>`;\n        this.html(html);\n\n        const $uploader = this;\n        const $files = this.find('.weui_uploader_files');\n        const $file = this.find('.weui_uploader_input');\n        var count = 0;\n        $file.on('change', function (event) {\n            var files = event.target.files;\n\n            if (files.length === 0) {\n                return;\n            }\n\n            if (count >= options.maxCount) {\n                $.weui.alert(`最多只能上传${options.maxCount}张图片`);\n                return;\n            }\n\n            $.each(files, (idx, file) => {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    var img = new Image();\n                    img.onload = function () {\n                        // 不要超出最大宽度\n                        var w = Math.min(options.maxWidth, img.width);\n                        // 高度按比例计算\n                        var h = img.height * (w / img.width);\n                        var canvas = document.createElement('canvas');\n                        var ctx = canvas.getContext('2d');\n                        // 设置 canvas 的宽度和高度\n                        canvas.width = w;\n                        canvas.height = h;\n\n                        var iphone = navigator.userAgent.match(/iPhone OS ([^\\s]*)/);\n                        if(iphone && iphone[1].substr(0, 1) == 7){\n                            if(img.width == 3264 && img.height == 2448){ // IOS7的拍照或选照片会被莫名地压缩，所以画板要height要*2\n                                ctx.drawImage(img, 0, 0, w, h * 2);\n                            }else{\n                                ctx.drawImage(img, 0, 0, w, h);\n                            }\n                        }else{\n                            ctx.drawImage(img, 0, 0, w, h);\n                        }\n\n                        var base64 = canvas.toDataURL('image/png');\n\n                        $files.append(`<li class=\"weui_uploader_file \" style=\"background-image:url(${base64})\"></li>`);\n                        ++count;\n                        $uploader.find('.weui_uploader_hd .weui_cell_ft').text(`${count}/${options.maxCount}`);\n\n                        options.onChange.call($uploader, {\n                            lastModified: file.lastModified,\n                            lastModifiedDate: file.lastModifiedDate,\n                            name: file.name,\n                            size: file.size,\n                            type: file.type,\n                            data: base64\n                        });\n                    };\n\n                    img.src = e.target.result;\n                };\n                reader.readAsDataURL(file);\n            });\n        });\n\n        this.update = function (msg) {\n            var $preview = $files.find('.weui_uploader_file').last();\n            $preview.addClass('weui_uploader_status');\n            $preview.html(`<div class=\"weui_uploader_status_content\">${msg}</div>`);\n        };\n\n        this.success = function () {\n            var $preview = $files.find('.weui_uploader_file').last();\n            $preview.removeClass('weui_uploader_status');\n            $preview.html('');\n        };\n\n        this.error = function () {\n            var $preview = $files.find('.weui_uploader_file').last();\n            $preview.addClass('weui_uploader_status');\n            $preview.html(`<div class=\"weui_uploader_status_content\"><i class=\"weui_icon_warn\"></i></div>`);\n        };\n\n        return this;\n    };\n    $.fn.uploader.noConflict = function(){\n        return oldFnUploader;\n    };\n})($);"],"sourceRoot":"/source/"}